!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("hyperactiv"),require("lit-html"),require("lit-html/directives/repeat"),require("lit-html/directives/cache"),require("lit-html/directives/until"),require("lit-html/directives/live"),require("lit-html/directives/guard"),require("lit-html/directives/class-map"),require("lit-html/directives/style-map"),require("lit-html/directives/if-defined"),require("lit-html/directives/async-append"),require("lit-html/directives/async-replace"),require("lit-html/directives/template-content"),require("lit-html/directives/unsafe-html"),require("lit-html/directives/unsafe-svg")):"function"==typeof define&&define.amd?define(["exports","hyperactiv","lit-html","lit-html/directives/repeat","lit-html/directives/cache","lit-html/directives/until","lit-html/directives/live","lit-html/directives/guard","lit-html/directives/class-map","lit-html/directives/style-map","lit-html/directives/if-defined","lit-html/directives/async-append","lit-html/directives/async-replace","lit-html/directives/template-content","lit-html/directives/unsafe-html","lit-html/directives/unsafe-svg"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).perlite={},e.hr,e.litHtml,e.repeat,e.cache,e.until,e.live,e.guard,e.classMap,e.styleMap,e.ifDefined,e.asyncAppend,e.asyncReplace,e.templateContent,e.unsafeHtml,e.unsafeSvg)}(this,(function(e,t,r,n,i,c,a,l,o,s,u,f,d,p,b,h){"use strict";function v(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=v(t);function y(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function E(e){if("true"===e||"false"===e)return"true"===e;if("null"===e)return null;if("undefined"!==e){if(""!==e&&!isNaN(Number(e)))return Number(e);try{return JSON.parse(e)}catch(e){}return e}}const g=r.directive((e=>t=>e(t.element))),O=new WeakMap,j=r.directive(((e,...t)=>{const r=n=>{const i=n.element;if(O.has(n)){const[i,c]=O.get(n);c!==e?(i.destroy(),O.delete(n),r(n)):i.update(...t)}else{const r=e(i,...t);O.set(n,[r,e])}};return r})),P=r.directive((e=>t=>{if(!(t instanceof r.EventPart))throw new Error('"bind" directive can only be used in event listeners');const n=t.element,i=n instanceof HTMLInputElement,c=n instanceof HTMLSelectElement,a=n instanceof HTMLTextAreaElement,l=n instanceof HTMLButtonElement;if(!(i||c||a||l))throw new Error('"bind" directive can only be applied to input/select/textarea/button elements.');t.setValue((function(...t){let r=n.defaultValue;if(c&&n.options.length>0){const e=n.selectedIndex>=0?n.selectedIndex:0;r=n.options[e].value}else if(i)switch(n.type){case"number":case"range":r=n.valueAsNumber;break;case"checkbox":case"radio":r=!!n.checked;break;case"time":case"date":case"datetime":case"datetime-local":r=n.valueAsDate;break;default:r=n.value}else r=n.value;e.call(this,r,...t)}))})),w=r.directive((e=>t=>{if(!(t instanceof r.EventPart))throw new Error('"capture" directive can only be used in event listeners');t.setValue({handleEvent:e,capture:!0})})),k=r.directive((e=>t=>{if(!(t instanceof r.EventPart))throw new Error('"once" directive can only be used in event listeners');t.setValue({handleEvent:e,once:!0})})),q=r.directive((e=>t=>{if(!(t instanceof r.EventPart))throw new Error('"passive" directive can only be used in event listeners');t.setValue({handleEvent:e,passive:!0})})),x=r.directive((e=>t=>{if(!(t instanceof r.EventPart))throw new Error('"prevent" directive can only be used in event listeners');t.setValue((function(t){t.preventDefault(),e.call(this,t)}))})),M=r.directive(((e,t=!1)=>n=>{if(!(n instanceof r.EventPart))throw new Error('"stop" directive can only be used in event listeners');n.setValue((function(r){t?r.stopImmediatePropagation():r.stopPropagation(),e.call(this,r)}))})),V=r.directive((e=>t=>{if(!(t instanceof r.EventPart))throw new Error('"self" directive can only be used in event listeners');t.setValue((function(t){t.target===this&&e.call(this,t)}))})),{observe:A,computed:L,dispose:T}=m.default,N=()=>{},H=(e,...t)=>{var{render:n=(()=>r.nothing),state:i={},target:c=document.body}=e,a=y(e,["render","state","target"]);const l="function"==typeof i?i(...t):i;Object.entries(c.dataset).forEach((([e,t])=>{e in l&&(l[e]=E(t))}));const o=A(l,Object.assign({batch:!0,deep:!0,bind:!0},a)),s=(e,t,{bubbles:r=!1,cancelable:n=!0}={})=>{c.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:r,cancelable:n}))};let u=!1;const f=()=>{r.render(n(o,s,...t),c),u||(s("mount",l),u=!0),s("update",l)},d=L((({computeAsync:e})=>u&&!document.contains(c)?v():Promise.resolve().then((()=>e(f))))),p=new Set,b=new Set,h=new MutationObserver((e=>{e.forEach((e=>{if("attributes"!==e.type)return;const t=e.target,r=e.attributeName.replace("data-","").replace(/-([a-z])/g,((e,t)=>t.toUpperCase()));if(!(r in o))return;const n=t.getAttribute(e.attributeName);if(n!==e.oldValue){const e=E(n);o[r]!==e&&(o[r]=e)}}))}));h.observe(c,{attributeFilter:Object.entries(l).reduce(((e,[t,r])=>("function"!=typeof r&&e.push("data-"+t.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))),e)),[]),attributeOldValue:!0,characterData:!1,childList:!1,subtree:!1});const v=()=>{s("destroy",l),h.disconnect(),T(d),b.forEach((e=>e())),b.clear(),p.forEach((e=>e())),p.clear(),c.innerHTML=""};return{on:(...e)=>{c.addEventListener(...e);const t=()=>(c.removeEventListener(...e),p.delete(t));return p.add(t),t},ctx:e=>e(...t),model:l,state:o,effect:(...e)=>{const t=L(...e),r=()=>(T(t),b.delete(r));return b.add(r),r},target:c,destroy:v,render:f}};Object.keys(r).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})})),Object.keys(n).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})),Object.keys(i).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})})),Object.keys(c).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})})),Object.keys(a).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})})),Object.keys(l).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})})),Object.keys(o).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})})),Object.keys(s).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})})),Object.keys(u).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})})),Object.keys(f).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}})})),Object.keys(d).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}})})),Object.keys(p).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})})),Object.keys(b).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return b[t]}})})),Object.keys(h).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})})),e.$=H,e.$$=(e,...t)=>{var{target:r}=e,n=y(e,["target"]);r.length||(r=[r]);const i=Array.prototype.map.call(r,(e=>H(Object.assign(Object.assign({},n),{target:e}),...t)));return Object.assign(Object.assign({},i),{effect:(e,t)=>i.map((r=>r.effect(e(r.state),t))),on:(...e)=>i.map((t=>t.on(...e))),destroy:()=>i.forEach((e=>e.destroy())),render:()=>i.forEach((e=>e.render())),state:e=>{i.forEach((t=>e(t.state)))},ctx:e=>e(...t),forEach:Array.prototype.forEach.bind(i),target:r})},e.bind=P,e.call=(e,...t)=>function(...r){e.call(this,...r,...t)},e.capture=w,e.computed=L,e.decorator=j,e.dispose=T,e.each=(e,t,r=(e=>e))=>n.repeat(e,r,t),e.noop=N,e.observe=A,e.once=k,e.passive=q,e.prevent=x,e.ref=g,e.self=V,e.stop=M,e.tick=(e=N)=>new Promise((e=>setTimeout(e))).then(e),Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map
