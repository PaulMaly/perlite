import e from"hyperactiv";import{directive as t,EventPart as n,nothing as r,render as a}from"lit-html";export*from"lit-html";import{repeat as s}from"lit-html/directives/repeat";export*from"lit-html/directives/repeat";export*from"lit-html/directives/cache";export*from"lit-html/directives/until";export*from"lit-html/directives/live";export*from"lit-html/directives/guard";export*from"lit-html/directives/class-map";export*from"lit-html/directives/style-map";export*from"lit-html/directives/if-defined";export*from"lit-html/directives/async-append";export*from"lit-html/directives/async-replace";export*from"lit-html/directives/template-content";export*from"lit-html/directives/unsafe-html";export*from"lit-html/directives/unsafe-svg";function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}const i=()=>{},c=(e=i)=>new Promise((e=>setTimeout(e))).then(e),l=(e,t)=>{const n=new Map;return(...r)=>{let a;if("function"==typeof t){const s=t.apply(e,r);!1===s?(a=JSON.stringify(r),n.delete(a)):!0!==s&&(a=s)}if(void 0===a&&(a=JSON.stringify(r)),n.has(a))return n.get(a);const s=e.apply(e,r);return n.set(a,s),s}};function d(e){if("true"===e||"false"===e)return"true"===e;if("null"===e)return null;if("undefined"!==e){if(""!==e&&!isNaN(Number(e)))return Number(e);try{return JSON.parse(e)}catch(e){}return e}}function f(e,t=!1){const n=e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()));return t?n.replace(/^\w/,(e=>e.toUpperCase())):n}function u(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()}const p=(e,t,n=(e=>e))=>s(e,n,t),m=t((e=>t=>e(t.element))),h=new WeakMap,v=t(((e,...t)=>{const n=r=>{const a=r.element;if(h.has(r)){const[a,s]=h.get(r);s!==e?(a.destroy(),h.delete(r),n(r)):a.update(...t)}else{const n=e(a,...t);h.set(r,[n,e])}};return n})),b=t((e=>t=>{if(!(t instanceof n))throw new Error('"bind" directive can only be used in event listeners');const r=t.element,a=r instanceof HTMLInputElement,s=r instanceof HTMLSelectElement,o=r instanceof HTMLTextAreaElement,i=r instanceof HTMLButtonElement;if(!(a||s||o||i))throw new Error('"bind" directive can only be applied to input/select/textarea/button elements.');t.setValue((function(...t){let n=r.defaultValue;if(s&&r.options.length>0){const e=r.selectedIndex>=0?r.selectedIndex:0;n=r.options[e].value}else if(a)switch(r.type){case"number":case"range":n=r.valueAsNumber;break;case"checkbox":case"radio":n=!!r.checked;break;case"time":case"date":case"datetime":case"datetime-local":n=r.valueAsDate;break;default:n=r.value}else n=r.value;e.call(this,n,...t)}))})),y=(e,...t)=>function(...n){e.call(this,...n,...t)},g=t((e=>t=>{if(!(t instanceof n))throw new Error('"capture" directive can only be used in event listeners');t.setValue("object"==typeof e?Object.assign(Object.assign({},e),{capture:!0}):{handleEvent:e,capture:!0})})),E=t((e=>t=>{if(!(t instanceof n))throw new Error('"once" directive can only be used in event listeners');t.setValue("object"==typeof e?Object.assign(Object.assign({},e),{once:!0}):{handleEvent:e,once:!0})})),O=t((e=>t=>{if(!(t instanceof n))throw new Error('"passive" directive can only be used in event listeners');t.setValue("object"==typeof e?Object.assign(Object.assign({},e),{passive:!0}):{handleEvent:e,passive:!0})})),w=t((e=>t=>{if(!(t instanceof n))throw new Error('"prevent" directive can only be used in event listeners');const{handleEvent:r}=e,a=o(e,["handleEvent"]);t.setValue(Object.assign({handleEvent:function(t){t.preventDefault(),(r||e).call(this,t)}},a))})),x=t(((e,t=!1)=>r=>{if(!(r instanceof n))throw new Error('"stop" directive can only be used in event listeners');const{handleEvent:a}=e,s=o(e,["handleEvent"]);r.setValue(Object.assign({handleEvent:function(n){t?n.stopImmediatePropagation():n.stopPropagation(),(a||e).call(this,n)}},s))})),j=t((e=>t=>{if(!(t instanceof n))throw new Error('"self" directive can only be used in event listeners');const{handleEvent:r}=e,a=o(e,["handleEvent"]);t.setValue(Object.assign({handleEvent:function(t){t.target===t.currentTarget&&(r||e).call(this,t)}},a))})),{observe:N,computed:V,dispose:L}=e,A=(e,...t)=>{var{render:n=(()=>r),state:s={},target:i=document.body}=e,c=o(e,["render","state","target"]);const l="function"==typeof s?s(...t):s;Object.entries(i.dataset).forEach((([e,t])=>{e in l&&(l[e]=d(t))}));const p=N(l,Object.assign({batch:!0,deep:!0,bind:!0},c)),m=(e,t,{bubbles:n=!1,cancelable:r=!0}={})=>{i.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:n,cancelable:r}))};let h=!1;const v=()=>{a(n(p,m,...t),i),h||(m("mount",l),h=!0),m("update",l)},b=V((({computeAsync:e})=>h&&!document.contains(i)?O():(m("state",l),Promise.resolve().then((()=>e(v))).catch((e=>m("error",e)))))),y=new Set,g=new Set,E=new MutationObserver((e=>{e.forEach((e=>{if("attributes"!==e.type)return;const t=e.target,n=f(e.attributeName.replace("data-",""));if(!(n in p))return;const r=t.getAttribute(e.attributeName);if(r!==e.oldValue){const e=d(r);p[n]!==e&&(p[n]=e)}}))}));E.observe(i,{attributeFilter:Object.entries(l).reduce(((e,[t,n])=>("function"!=typeof n&&e.push("data-"+u(t)),e)),[]),attributeOldValue:!0,characterData:!1,childList:!1,subtree:!1});const O=()=>{E.disconnect(),L(b),g.forEach((e=>e())),g.clear(),y.forEach((e=>e())),y.clear(),i.innerHTML="",m("destroy",l)};return{on:(e,t,n)=>{i.addEventListener(e,t,n);const r=()=>(i.removeEventListener(e,t,n),y.delete(r));return y.add(r),r},ctx:e=>e(...t),model:l,state:p,effect:(e,t)=>{const n=V(e,t),r=()=>(L(n),g.delete(r));return g.add(r),r},target:i,destroy:O,render:v}},M=(e,...t)=>{var{target:n}=e,r=o(e,["target"]);n.length||(n=[n]);const a=Array.prototype.map.call(n,(e=>A(Object.assign(Object.assign({},r),{target:e}),...t)));return Object.assign(Object.assign({},a),{effect:(e,t)=>{const n=a.map((n=>n.effect(e(n.state),t)));return()=>n.forEach((e=>e()))},on:(...e)=>{const t=a.map((t=>t.on(...e)));return()=>t.forEach((e=>e()))},destroy:()=>a.forEach((e=>e.destroy())),render:()=>a.forEach((e=>e.render())),state:e=>{a.forEach((t=>e(t.state)))},ctx:e=>e(...t),forEach:Array.prototype.forEach.bind(a),target:n})};export{A as $,M as $$,d as attrToVal,b as bind,y as call,f as camelCase,g as capture,V as computed,v as decorator,L as dispose,p as each,u as kebabCase,l as memo,i as noop,N as observe,E as once,O as passive,w as prevent,m as ref,j as self,x as stop,c as tick};
//# sourceMappingURL=index.min.mjs.map
