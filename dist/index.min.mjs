import e from"hyperactiv";import{directive as t,EventPart as r,nothing as n,render as a}from"lit-html";export*from"lit-html";import{repeat as i}from"lit-html/directives/repeat";export*from"lit-html/directives/repeat";export*from"lit-html/directives/cache";export*from"lit-html/directives/until";export*from"lit-html/directives/live";export*from"lit-html/directives/guard";export*from"lit-html/directives/class-map";export*from"lit-html/directives/style-map";export*from"lit-html/directives/if-defined";export*from"lit-html/directives/async-append";export*from"lit-html/directives/async-replace";export*from"lit-html/directives/template-content";export*from"lit-html/directives/unsafe-html";export*from"lit-html/directives/unsafe-svg";function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function s(e){if("true"===e||"false"===e)return"true"===e;if("null"===e)return null;if("undefined"!==e){if(""!==e&&!isNaN(Number(e)))return Number(e);try{return JSON.parse(e)}catch(e){}return e}}const c=(e,t,r=(e=>e))=>i(e,r,t),l=t((e=>t=>e(t.element))),d=new WeakMap,u=t(((e,...t)=>{const r=n=>{const a=n.element;if(d.has(n)){const[a,i]=d.get(n);i!==e?(a.destroy(),d.delete(n),r(n)):a.update(...t)}else{const r=e(a,...t);d.set(n,[r,e])}};return r})),f=t((e=>t=>{if(!(t instanceof r))throw new Error('"bind" directive can only be used in event listeners');const n=t.element,a=n instanceof HTMLInputElement,i=n instanceof HTMLSelectElement,o=n instanceof HTMLTextAreaElement,s=n instanceof HTMLButtonElement;if(!(a||i||o||s))throw new Error('"bind" directive can only be applied to input/select/textarea/button elements.');t.setValue((function(...t){let r=n.defaultValue;if(i&&n.options.length>0){const e=n.selectedIndex>=0?n.selectedIndex:0;r=n.options[e].value}else if(a)switch(n.type){case"number":case"range":r=n.valueAsNumber;break;case"checkbox":case"radio":r=!!n.checked;break;case"time":case"date":case"datetime":case"datetime-local":r=n.valueAsDate;break;default:r=n.value}else r=n.value;e.call(this,r,...t)}))})),p=(e,...t)=>function(...r){e.call(this,...r,...t)},m=t((e=>t=>{if(!(t instanceof r))throw new Error('"capture" directive can only be used in event listeners');t.setValue({handleEvent:e,capture:!0})})),h=t((e=>t=>{if(!(t instanceof r))throw new Error('"once" directive can only be used in event listeners');t.setValue({handleEvent:e,once:!0})})),v=t((e=>t=>{if(!(t instanceof r))throw new Error('"passive" directive can only be used in event listeners');t.setValue({handleEvent:e,passive:!0})})),b=t((e=>t=>{if(!(t instanceof r))throw new Error('"prevent" directive can only be used in event listeners');t.setValue((function(t){t.preventDefault(),e.call(this,t)}))})),y=t(((e,t=!1)=>n=>{if(!(n instanceof r))throw new Error('"stop" directive can only be used in event listeners');n.setValue((function(r){t?r.stopImmediatePropagation():r.stopPropagation(),e.call(this,r)}))})),E=t((e=>t=>{if(!(t instanceof r))throw new Error('"self" directive can only be used in event listeners');t.setValue((function(t){t.target===this&&e.call(this,t)}))})),{observe:g,computed:w,dispose:x}=e,O=()=>{},j=(e=O)=>new Promise((e=>setTimeout(e))).then(e),V=(e,...t)=>{var{render:r=(()=>n),state:i={},target:c=document.body}=e,l=o(e,["render","state","target"]);const d="function"==typeof i?i(...t):i;Object.entries(c.dataset).forEach((([e,t])=>{e in d&&(d[e]=s(t))}));const u=g(d,Object.assign({batch:!0,deep:!0,bind:!0},l)),f=(e,t,{bubbles:r=!1,cancelable:n=!0}={})=>{c.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:r,cancelable:n}))};let p=!1;const m=()=>{a(r(u,f,...t),c),p||(f("mount",d),p=!0),f("update",d)},h=w((({computeAsync:e})=>p&&!document.contains(c)?E():Promise.resolve().then((()=>e(m))))),v=new Set,b=new Set,y=new MutationObserver((e=>{e.forEach((e=>{if("attributes"!==e.type)return;const t=e.target,r=e.attributeName.replace("data-","").replace(/-([a-z])/g,((e,t)=>t.toUpperCase()));if(!(r in u))return;const n=t.getAttribute(e.attributeName);if(n!==e.oldValue){const e=s(n);u[r]!==e&&(u[r]=e)}}))}));y.observe(c,{attributeFilter:Object.entries(d).reduce(((e,[t,r])=>("function"!=typeof r&&e.push("data-"+t.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))),e)),[]),attributeOldValue:!0,characterData:!1,childList:!1,subtree:!1});const E=()=>{f("destroy",d),y.disconnect(),x(h),b.forEach((e=>e())),b.clear(),v.forEach((e=>e())),v.clear(),c.innerHTML=""};return{on:(...e)=>{c.addEventListener(...e);const t=()=>(c.removeEventListener(...e),v.delete(t));return v.add(t),t},ctx:e=>e(...t),model:d,state:u,effect:(...e)=>{const t=w(...e),r=()=>(x(t),b.delete(r));return b.add(r),r},target:c,destroy:E,render:m}},L=(e,...t)=>{var{target:r}=e,n=o(e,["target"]);r.length||(r=[r]);const a=Array.prototype.map.call(r,(e=>V(Object.assign(Object.assign({},n),{target:e}),...t)));return Object.assign(Object.assign({},a),{effect:(e,t)=>a.map((r=>r.effect(e,t))),on:(...e)=>a.map((t=>t.on(...e))),destroy:()=>a.forEach((e=>e.destroy())),render:()=>a.forEach((e=>e.render())),state:e=>{a.forEach(((t,r)=>e(t.state,r)))},ctx:e=>e(...t),forEach:Array.prototype.forEach.bind(a),target:r})};export{V as $,L as $$,f as bind,p as call,m as capture,w as computed,u as decorator,x as dispose,c as each,O as noop,g as observe,h as once,v as passive,b as prevent,l as ref,E as self,y as stop,j as tick};
//# sourceMappingURL=index.min.mjs.map
