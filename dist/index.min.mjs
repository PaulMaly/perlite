import e from"hyperactiv";import{directive as t,EventPart as r,nothing as n,render as i}from"lit-html";export*from"lit-html";import{repeat as a}from"lit-html/directives/repeat";export*from"lit-html/directives/repeat";export*from"lit-html/directives/cache";export*from"lit-html/directives/until";export*from"lit-html/directives/live";export*from"lit-html/directives/guard";export*from"lit-html/directives/class-map";export*from"lit-html/directives/style-map";export*from"lit-html/directives/if-defined";export*from"lit-html/directives/async-append";export*from"lit-html/directives/async-replace";export*from"lit-html/directives/template-content";export*from"lit-html/directives/unsafe-html";export*from"lit-html/directives/unsafe-svg";function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}const s=()=>{},c=(e=s)=>new Promise((e=>setTimeout(e))).then(e),l=(e,t)=>{const r=new Map;return(...n)=>{let i;if("function"==typeof t){const a=t.apply(e,n);!1===a?(i=JSON.stringify(n),r.delete(i)):!0!==a&&(i=a)}if(void 0!==i&&(i=JSON.stringify(n)),r.has(i))return r.get(i);const a=e.apply(e,n);return r.set(i,a),a}};function u(e){if("true"===e||"false"===e)return"true"===e;if("null"===e)return null;if("undefined"!==e){if(""!==e&&!isNaN(Number(e)))return Number(e);try{return JSON.parse(e)}catch(e){}return e}}function d(e){return e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))}function f(e){return e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))}const p=(e,t,r=(e=>e))=>a(e,r,t),m=t((e=>t=>e(t.element))),h=new WeakMap,v=t(((e,...t)=>{const r=n=>{const i=n.element;if(h.has(n)){const[i,a]=h.get(n);a!==e?(i.destroy(),h.delete(n),r(n)):i.update(...t)}else{const r=e(i,...t);h.set(n,[r,e])}};return r})),b=t((e=>t=>{if(!(t instanceof r))throw new Error('"bind" directive can only be used in event listeners');const n=t.element,i=n instanceof HTMLInputElement,a=n instanceof HTMLSelectElement,o=n instanceof HTMLTextAreaElement,s=n instanceof HTMLButtonElement;if(!(i||a||o||s))throw new Error('"bind" directive can only be applied to input/select/textarea/button elements.');t.setValue((function(...t){let r=n.defaultValue;if(a&&n.options.length>0){const e=n.selectedIndex>=0?n.selectedIndex:0;r=n.options[e].value}else if(i)switch(n.type){case"number":case"range":r=n.valueAsNumber;break;case"checkbox":case"radio":r=!!n.checked;break;case"time":case"date":case"datetime":case"datetime-local":r=n.valueAsDate;break;default:r=n.value}else r=n.value;e.call(this,r,...t)}))})),y=(e,...t)=>function(...r){e.call(this,...r,...t)},g=t((e=>t=>{if(!(t instanceof r))throw new Error('"capture" directive can only be used in event listeners');t.setValue({handleEvent:e,capture:!0})})),E=t((e=>t=>{if(!(t instanceof r))throw new Error('"once" directive can only be used in event listeners');t.setValue({handleEvent:e,once:!0})})),w=t((e=>t=>{if(!(t instanceof r))throw new Error('"passive" directive can only be used in event listeners');t.setValue({handleEvent:e,passive:!0})})),x=t((e=>t=>{if(!(t instanceof r))throw new Error('"prevent" directive can only be used in event listeners');t.setValue((function(t){t.preventDefault(),e.call(this,t)}))})),O=t(((e,t=!1)=>n=>{if(!(n instanceof r))throw new Error('"stop" directive can only be used in event listeners');n.setValue((function(r){t?r.stopImmediatePropagation():r.stopPropagation(),e.call(this,r)}))})),j=t((e=>t=>{if(!(t instanceof r))throw new Error('"self" directive can only be used in event listeners');t.setValue((function(t){t.target===this&&e.call(this,t)}))})),{observe:N,computed:V,dispose:L}=e,A=(e,...t)=>{var{render:r=(()=>n),state:a={},target:s=document.body}=e,c=o(e,["render","state","target"]);const l="function"==typeof a?a(...t):a;Object.entries(s.dataset).forEach((([e,t])=>{e in l&&(l[e]=u(t))}));const p=N(l,Object.assign({batch:!0,deep:!0,bind:!0},c)),m=(e,t,{bubbles:r=!1,cancelable:n=!0}={})=>{s.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:r,cancelable:n}))};let h=!1;const v=()=>{i(r(p,m,...t),s),h||(m("mount",l),h=!0),m("update",l)},b=V((({computeAsync:e})=>h&&!document.contains(s)?w():(m("state",l),Promise.resolve().then((()=>e(v)))))),y=new Set,g=new Set,E=new MutationObserver((e=>{e.forEach((e=>{if("attributes"!==e.type)return;const t=e.target,r=d(e.attributeName.replace("data-",""));if(!(r in p))return;const n=t.getAttribute(e.attributeName);if(n!==e.oldValue){const e=u(n);p[r]!==e&&(p[r]=e)}}))}));E.observe(s,{attributeFilter:Object.entries(l).reduce(((e,[t,r])=>("function"!=typeof r&&e.push("data-"+f(t)),e)),[]),attributeOldValue:!0,characterData:!1,childList:!1,subtree:!1});const w=()=>{m("destroy",l),E.disconnect(),L(b),g.forEach((e=>e())),g.clear(),y.forEach((e=>e())),y.clear(),s.innerHTML=""};return{on:(e,t,r)=>{s.addEventListener(e,t,r);const n=()=>(s.removeEventListener(e,t,r),y.delete(n));return y.add(n),n},ctx:e=>e(...t),model:l,state:p,effect:(e,t)=>{const r=V(e,t),n=()=>(L(r),g.delete(n));return g.add(n),n},target:s,destroy:w,render:v}},M=(e,...t)=>{var{target:r}=e,n=o(e,["target"]);r.length||(r=[r]);const i=Array.prototype.map.call(r,(e=>A(Object.assign(Object.assign({},n),{target:e}),...t)));return Object.assign(Object.assign({},i),{effect:(e,t)=>i.map((r=>r.effect(e(r.state),t))),on:(...e)=>i.map((t=>t.on(...e))),destroy:()=>i.forEach((e=>e.destroy())),render:()=>i.forEach((e=>e.render())),state:e=>{i.forEach((t=>e(t.state)))},ctx:e=>e(...t),forEach:Array.prototype.forEach.bind(i),target:r})};export{A as $,M as $$,u as attrToVal,b as bind,y as call,d as camelCase,g as capture,V as computed,f as dashCase,v as decorator,L as dispose,p as each,l as memo,s as noop,N as observe,E as once,w as passive,x as prevent,m as ref,j as self,O as stop,c as tick};
//# sourceMappingURL=index.min.mjs.map
